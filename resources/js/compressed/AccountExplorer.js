Analytics.AccountExplorer=Garnish.Base.extend({data:null,$accountSelect:null,$propertySelect:null,$viewSelect:null,init:function(t,e){this.setSettings(e,Analytics.AccountExplorer.defaults),this.$container=$(t),this.$spinner=$(".spinner",this.$container),this.$accountSelect=$(".account > select",this.$container),this.$propertySelect=$(".property > select",this.$container),this.$viewSelect=$(".view > select",this.$container),this.addListener(this.$accountSelect,"change","onAccountChange"),this.addListener(this.$propertySelect,"change","onPropertyChange"),this.addListener(this.$viewSelect,"change","onViewChange"),this.$spinner.removeClass("hidden"),Craft.postActionRequest("analytics/tests/getAccountExplorerData",{},$.proxy(function(t,e){if("success"==e){this.data=t;var n=this.$accountSelect.val();this.$propertySelect.val(),this.$viewSelect.val();this.updateAccountOptions(),this.updatePropertyOptions(),this.updateViewOptions(),this.$accountSelect.val(n),this.$accountSelect.trigger("change"),this.$spinner.addClass("hidden")}else console.log("error")},this))},onAccountChange:function(){console.log("onAccountChange"),this.updatePropertyOptions(),this.updateViewOptions()},onPropertyChange:function(){console.log("onPropertyChange"),this.updateViewOptions()},onViewChange:function(){console.log("onViewChange")},updateAccountOptions:function(){$("option",this.$accountSelect).remove(),$.each(this.data.accounts,$.proxy(function(t,e){var n=$("<option />").appendTo(this.$accountSelect);n.attr("value",e.id),n.text(e.name)},this))},updatePropertyOptions:function(){$("option",this.$propertySelect).remove(),$.each(this.data.properties,$.proxy(function(t,e){if(e.accountId==this.$accountSelect.val()){var n=$("<option />").appendTo(this.$propertySelect);n.attr("value",e.id),n.text(e.name)}},this))},updateViewOptions:function(){$("option",this.$viewSelect).remove(),$.each(this.data.views,$.proxy(function(t,e){if(e.webPropertyId==this.$propertySelect.val()){var n=$("<option />").appendTo(this.$viewSelect);n.attr("value",e.id),n.text(e.name)}},this))},initData:function(){this.data={accounts:[{id:"1547168",name:"Dukt Network"},{id:"67133596",name:"Gumroad Dukt"}],properties:[{id:"UA-1547168-20",accountId:"1547168",name:"https://dukt.net/"},{id:"UA-1547168-27",accountId:"1547168",name:"plugins.dev"},{id:"UA-67133596-1",accountId:"67133596",name:"Gumroad Dukt"}],views:[{id:"107887337",accountId:"67133596",propertyId:"UA-67133596-1",name:"All Web Site Data"},{id:"42395806",accountId:"1547168",propertyId:"UA-1547168-20",name:"dukt.net"},{id:"82988457",accountId:"1547168",propertyId:"UA-1547168-27",name:"plugins.dev"}]}}},{defaults:{}});
google.load("visualization","1",{packages:["corechart","table"]});AnalyticsCountReport=Garnish.Base.extend({init:function(e){this.$element=$(e);this.$inject=$(e);var t={start:this.$element.data("start"),end:this.$element.data("end")};Craft.postActionRequest("analytics/charts/getCountReport",t,function(e){console.log("response",e);this.$inject.html(e.html)},this)}});AnalyticsChart=Garnish.Base.extend({$element:null,$inject:null,$data:null,$chart:null,$googleData:null,$googleChart:null,init:function(e){this.$element=e;this.$inject=$(".inject",e);this.$data=$(".data",e);this.$data.css("display","none");this.$data=this.$data.html();this.$data=$.parseJSON(this.$data);Craft.postActionRequest("analytics/charts/getChart",{data:this.$data},function(e){this.initChart(e.chart)},this)},initChart:function(e){this.$chart=e;this.$googleData=new google.visualization.DataTable;var t=this;$.each(e.columns,function(e,n){t.$googleData.addColumn(n.type,n.label)});this.$googleData.addRows(e.rows);switch(e.type){case"AreaChart":this.$googleChart=new google.visualization.AreaChart(this.$inject.get(0));break;case"LineChart":this.$googleChart=new google.visualization.LineChart(this.$inject.get(0));break;case"Table":this.$googleChart=new google.visualization.Table(this.$inject.get(0));break;case"ColumnChart":this.$googleChart=new google.visualization.ColumnChart(this.$inject.get(0));break;case"BubbleChart":this.$googleChart=new google.visualization.BubbleChart(this.$inject.get(0));break;case"BarChart":this.$googleChart=new google.visualization.BarChart(this.$inject.get(0));break;case"ColumnChart":this.$googleChart=new google.visualization.ColumnChart(this.$inject.get(0));break;case"PieChart":this.$googleChart=new google.visualization.PieChart(this.$inject.get(0))}this.drawChart();$("body").bind("redraw",function(e){t.drawChart()})},drawChart:function(){this.$googleChart&&this.$googleChart.draw(this.$googleData,this.$chart.options)}});$(document).ready(function(){var e=$(".analyticsChart"),t=[];e.each(function(e,n){t=new AnalyticsChart(n)});var n=$(".analyticsCountReport"),r=[];n.each(function(e,t){r=new AnalyticsCountReport(t)})});
function analyticsRealtimeRequest(){var e={};console.log("send realtime request",e);Craft.postActionRequest("analytics/charts/realtime",e,function(e){console.log("get realtime response",e);$(".analytics-realtime .active-visitors .count").text(e.total);if(e.total>0){$(".analytics-realtime .progress").removeClass("hidden");$(".analytics-realtime .legend").removeClass("hidden")}else{$(".analytics-realtime .progress").addClass("hidden");$(".analytics-realtime .legend").addClass("hidden")}if(e.visitorType.newVisitor>0)var t=Math.round(100*e.visitorType.returningVisitor/e.visitorType.newVisitor);else var t=100;var n=100-t;$(".analytics-realtime .progress-bar.blue").css("width",t+"%");$(".analytics-realtime .progress-bar.green").css("width",n+"%");$(".analytics-realtime .progress-bar.blue span").text(t+"%");$(".analytics-realtime .progress-bar.green span").text(n+"%");if(e.total>0){$(".no-active-visitors").addClass("hidden");$(".analytics-realtime-content table").removeClass("hidden");$(".analytics-realtime-content tbody").html("");$.each(e.content,function(e,t){var n=$("<tr><td>"+e+'</td><td class="thin">'+t+"</td></td>");$(".analytics-realtime-content tbody").append(n)})}else{$(".no-active-visitors").removeClass("hidden");$(".analytics-realtime-content table").addClass("hidden")}})}$(document).ready(function(){console.log("init realtime");analyticsRealtimeRequest();setInterval(analyticsRealtimeRequest,1e4)});
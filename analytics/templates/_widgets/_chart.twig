{#
{% set title = settings.title %}

{% if title is not defined %}
    {% set title = "Default Title" %}
{% endif %}

{% if metric is not defined %}
    {% set metric = "" %}
{% endif %}

{% if type is not defined %}
    {% set type = "column" %}
{% endif %}


'sort': '-ga:visits',
        'max-results' : 10

#}


{% set profile = craft.analytics.profile %}
{% set webProperty = craft.analytics.webProperty %}

{% set chartQuery = {
    param1 : 'ga:' ~ profile.id,
    param2 : now|date_modify("-"~settings.periodQuantity~" "~settings.periodUnit~"s")|date("Y-m-d"),
    param3 : now|date("Y-m-d"),
    param4 : settings.metric,
    param5 : {
        'dimensions' : settings.dimensions,

    }
} %}


{% if settings.chartType == "donut" %}

    {% set defaultChartOptions = {
        title: settings.title,
        chartType:settings.chartType,
        chartArea : {
            width:'100%',
            height:'100%',
            left:0,
            right:0,
            top:20,
            bottom:20
        }
    } %}

{% else %}

    {% set defaultChartOptions = {
        title: settings.title,
        chartType:settings.chartType,
        chartArea : {
            width:'100%',
            height:'100%',
            left:0,
            right:0,
            top:0,
            bottom:0
        }
    } %}

{% endif %}

{% if chartOptions is not defined %}
    {% set chartOptions = defaultChartOptions %}
{% endif %}


{% set chart = {
    chart: {
        chartQuery: chartQuery,
        chartOptions: chartOptions
    }
} %}

{% include 'analytics/_chartElement' with chart %}
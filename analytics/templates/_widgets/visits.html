{% extends "analytics/_widgets/_layout" %}

{% includeJsResource 'analytics/js/analytics-tabs.js' %}

{% block body %}

	{% set profile = craft.analytics.profile %}
	{% set webProperty = craft.analytics.webProperty %}



	{% if profile.error is defined %}

		<div class="center">
			<p class="error">{{profile.error}}</p>

			<p><a href="{{url('settings/plugins/analytics')}}" class="btn icon settings">Analytics settings</a></p>
		</div>

	{% else %}

		<div class="analyticsTabs">
			<ul class="analyticsNav">
				<li><a href="#week">{{'Week'|t}}</a></li>
				<li><a href="#month">{{'Month'|t}}</a></li>
				<li><a href="#year">{{'Year'|t}}</a></li>
			</ul>

			<div class="clear"></div>

			<div class="analyticsTab hidden">


				{% include 'analytics/_includes/chartElement' with {
				    chart: {
				        chartQuery: {
						    param1 : 'ga:' ~ profile.id,
						    param2 : now|date_modify("-1 week")|date("Y-m-d"),
						    param3 : now|date("Y-m-d"),
						    param4 : 'ga:visits',
						    param5 : {
						        'dimensions' : 'ga:day, ga:month, ga:year',
						        'sort' : 'ga:year, ga:month, ga:day',
						    }
						},
				        chartOptions: {
					        title: 'Audience Visits',
					        chartType:'column',
					        chartArea : {
					            width:'100%',
					            height:'100%',
					            left:0,
					            right:0,
					            top:0,
					            bottom:0
					        }
					    }
				    }
				} %}

			</div>

			<div class="analyticsTab hidden">

				{% include 'analytics/_includes/chartElement' with {
				    chart: {
				        chartQuery: {
						    param1 : 'ga:' ~ profile.id,
						    param2 : now|date_modify("-1 month")|date("Y-m-d"),
						    param3 : now|date("Y-m-d"),
						    param4 : 'ga:visits',
						    param5 : {
						        'dimensions' : 'ga:day, ga:month, ga:year',
						        'sort' : 'ga:year, ga:month, ga:day',
						    }
						},
				        chartOptions: {
					        title: 'Audience Visits',
					        chartType:'column',
					        chartArea : {
					            width:'100%',
					            height:'100%',
					            left:0,
					            right:0,
					            top:0,
					            bottom:0
					        }
					    }
				    }
				} %}

			</div>

			<div class="analyticsTab hidden">

				{% include 'analytics/_includes/chartElement' with {
				    chart: {
				        chartQuery: {
						    param1 : 'ga:' ~ profile.id,
						    param2 : now|date_modify("-1 year")|date("Y-m-d"),
						    param3 : now|date("Y-m-d"),
						    param4 : 'ga:visits',
						    param5 : {
						        'dimensions' : 'ga:month, ga:year',
						        'sort' : 'ga:year, ga:month',
						    }
						},
				        chartOptions: {
					        title: 'Audience : Visits',
					        chartType:'column',
					        chartArea : {
					            width:'100%',
					            height:'100%',
					            left:0,
					            right:0,
					            top:0,
					            bottom:0
					        }
					    }
				    }
				} %}
			</div>
		</div>
	{% endif %}

{% endblock %}
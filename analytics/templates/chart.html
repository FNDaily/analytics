{% set result = craft.analytics.api.data_ga.get(
    query.param1,
    query.param2,
    query.param3,
    query.param4,
    query.param5
) %}

{% set rows = [] %}
{% for row in result.rows %}
    {% set rows = rows|merge([[row[0], (row[1] + 1 - 1)]]) %}
{% endfor %}

<html>
  <head>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart", 'table']});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = new google.visualization.DataTable();

        // Create the data table

        {% for col in columns %}
            data.addColumn('{{col.type}}', '{{col.label}}');
        {% endfor %}

        // Add rows
        data.addRows({{rows|json_encode|raw}});

        {% set defaultOptions = {

            legend:'none',
            sliceVisibilityThreshold:1/20,
            pieHole:0.5,

            fill:30,
            thickness:5,
            width: 630,
            height: 180,
            title: 'my title',
            colors:['#058dc7','#e6f4fa'],
            areaOpacity: 0.1,
            hAxis: {
                textPosition: 'in',
                showTextEvery: 5,
                slantedText: false,
                textStyle: {
                    color: '#058dc7',
                    fontSize: 10
                }
            },
            pointSize: 8,
            legend: 'none',
            chartArea:{
                left:0,
                top:30,
                width:"100%",
                height:"100%"
            }
        } %}

        {% set newOptions = {} %}
        {% set newOptions = newOptions|merge(defaultOptions) %}

        {% if options is defined %}
            {% set newOptions = newOptions|merge(options) %}
        {% endif %}

        {% set options = newOptions %}


        var options = {{options|json_encode|raw}};

        var chart = new google.visualization.{{type}}(document.getElementById('chart_div'));

        chart.draw(data, options);
      }
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html>
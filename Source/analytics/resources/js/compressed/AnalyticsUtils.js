var AnalyticsUtils={responseToDataTable:function(response){var data=new google.visualization.DataTable;return $.each(response.cols,function(e,t){data.addColumn(t)}),$.each(response.rows,function(kRow,row){$.each(row,function(kCell,cell){switch(response.cols[kCell].id){case"ga:date":$dateString=cell.v,$year=eval($dateString.substr(0,4)),$month=eval($dateString.substr(4,2))-1,$day=eval($dateString.substr(6,2)),$date=new Date($year,$month,$day),row[kCell]=$date;break;case"ga:yearMonth":$dateString=cell.v,$year=eval($dateString.substr(0,4)),$month=eval($dateString.substr(4,2))-1,$date=new Date($year,$month,"01"),row[kCell]=$date}}),data.addRow(row)}),data},parseColumn:function(e){$type="string",("INTEGER"==e.dataType||"FLOAT"==e.dataType||"PERCENT"==e.dataType||"CURRENCY"==e.dataType||"TIME"==e.dataType)&&($type="number"),"ga:date"==e.name&&($type="date",e.dataType="DATE"),"ga:latitude"==e.name&&($type="number"),"ga:longitude"==e.name&&($type="number"),"ga:yearMonth"==e.name&&($type="date",e.dataType="DATE");var t={type:$type,dataType:e.dataType,name:e.name,label:e.label};return t},parseRows:function(apiColumns,apiRows){var rows=[];return"undefined"==typeof apiRows?rows:($.each(apiRows,function(k,row){var cells=[];$.each(apiColumns,function(k2,column){column=AnalyticsUtils.parseColumn(column);var cell=apiRows[k][k2];"DATE"==column.dataType&&($date="object"==typeof cell?cell.v:cell,$year=eval($date.substr(0,4)),$month=eval($date.substr(5,2))-1,$day=eval($date.substr(8,2)),newDate=new Date($year,$month,$day),"object"==typeof $date?(cell.v=newDate,cell.f="x"):cell=newDate),cells[k2]=cell}),rows[k]=cells}),rows)}};AnalyticsChartOptions=Garnish.Base.extend({},{area:function(e){switch(options=this.defaults.area,e){case"week":options.hAxis.format="E",options.hAxis.showTextEvery=1;break;case"month":options.hAxis.format="MMM d",options.hAxis.showTextEvery=1;break;case"year":options.hAxis.showTextEvery=1,options.hAxis.format="MMM yy"}return options},table:function(){return this.defaults.table},geo:function(e){switch(options=this.defaults.geo,e){case"ga:city":options.displayMode="markers";break;case"ga:country":options.resolution="countries",options.displayMode="regions";break;case"ga:continent":options.resolution="continents",options.displayMode="regions";break;case"ga:subContinent":options.resolution="subcontinents",options.displayMode="regions"}return options},pie:function(){return this.defaults.pie},field:function(){return{colors:["#058DC7"],backgroundColor:"#fdfdfd",areaOpacity:.1,pointSize:8,lineWidth:4,legend:!1,hAxis:{textStyle:{color:"#888"},baselineColor:"#fdfdfd",gridlines:{color:"none"}},vAxis:{maxValue:5},series:{0:{targetAxisIndex:0},1:{targetAxisIndex:1}},vAxes:[{textStyle:{color:"#888"},format:"#",textPosition:"in",baselineColor:"#eee",gridlines:{color:"#eee"}},{textStyle:{color:"#888"},format:"#",textPosition:"in",baselineColor:"#eee",gridlines:{color:"#eee"}}],chartArea:{top:10,bottom:10,width:"100%",height:"80%"}}},defaults:{area:{theme:"maximized",legend:"none",backgroundColor:"#FFF",colors:["#058DC7"],areaOpacity:.1,pointSize:8,lineWidth:4,chartArea:{},hAxis:{format:"E",textPosition:"in",textStyle:{color:"#058DC7"},showTextEvery:1,baselineColor:"#fff",gridlines:{color:"none"}},vAxis:{textPosition:"in",textStyle:{color:"#058DC7"},baselineColor:"#ccc",gridlines:{color:"#fafafa"},maxValue:0}},geo:{displayMode:"auto"},pie:{theme:"maximized",height:282,pieHole:.5,legend:{alignment:"center",position:"top"},chartArea:{top:40,height:"82%"},sliceVisibilityThreshold:1/120},table:{}}});
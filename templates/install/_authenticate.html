{% set scope = [
    'https://www.googleapis.com/auth/userinfo.profile',
    'https://www.googleapis.com/auth/userinfo.email',
    'https://www.googleapis.com/auth/analytics'
    ] %}

{% set provider = craft.oauth.getProvider(providerHandle) %}

{% if not provider %}{% exit 404 %}{% endif %}

<h2>Authenticate</h2>

{% if provider is defined %}

    <p>Authenticate with {{provider.name}} so we can start gathering data from the API.</p>

    <p>
        <a class="btn submit" href="{{ craft.oauth.connect(providerHandle, scope, pluginHandle~'.system') }}">Authenticate with {{provider.name}}</a> &nbsp;
    </p>

    <p>
        <a class="btn small" href="{{url(pluginHandle~'/install/api')}}">Change API Client ID &amp; secret</a>
    </p>

{% endif %}

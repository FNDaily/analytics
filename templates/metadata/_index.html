{% extends "analytics/_layouts/cp" %}
{% import "_includes/forms" as forms %}

{% set selectedTab = 'metadata' %}

{% set content %}


    <form action="" method="post">

        {{ getCsrfInput() }}

        <input type="hidden" name="action" value="analytics/metadata/search">

        {{ forms.textField({
            first: true,
            placeholder: "Enter dimension or metric name"|t,
            name: 'q',
            value: (q is defined ? q),
        }) }}

        <input type="submit" class="btn submit" value="Search" />

    </form>

    {% if columns is defined %}


        {% for column in columns %}
            <hr>

            {% include 'analytics/_includes/column' %}
        {% endfor %}
    {% endif %}

    <hr>

    <h2>{{ "Metadata Status"|t }}</h2>

    {% if metadataFileExists %}

        <ul>
            <li>{{ dimensions|length }} dimensions</li>
            <li>{{ metrics|length }} metrics</li>
        </ul>

        <div class="buttons">
            <a href="{{ actionUrl('analytics/metadata/loadMetadata') }}" class="btn">{{ "Refresh Metadata"|t }}</a>
        </div>
    {% else %}

        <p>{{ "Metadata file doesnâ€™t exist"|t }}</p>

        <div class="buttons">
            <a href="{{ actionUrl('analytics/metadata/loadMetadata') }}" class="btn">{{ "Load Metadata"|t }}</a>
        </div>
    {% endif %}

{% endset %}
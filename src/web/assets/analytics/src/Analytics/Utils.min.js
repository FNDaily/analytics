Analytics.Utils={responseToDataTable:function(t){var e=new google.visualization.DataTable;return $.each(t.cols,function(t,a){var n;switch(a.type){case"percent":case"time":case"integer":case"currency":case"float":n="number";break;case"continent":case"subContinent":n="string";break;default:n=a.type}e.addColumn({type:n,label:a.label,id:a.id})}),$.each(t.rows,function(a,n){$.each(n,function(e,a){switch(t.cols[e].type){case"continent":case"subContinent":case"currency":case"percent":case"integer":case"time":n[e]={v:a,f:Analytics.Utils.formatByType(t.cols[e].type,a)};break;default:n[e]=Analytics.Utils.formatByType(t.cols[e].type,a)}}),e.addRow(n)}),e},formatByType:function(type,value){switch(type){case"continent":return Analytics.Metadata.getContinentByCode(value);case"subContinent":return Analytics.Metadata.getSubContinentByCode(value);case"currency":return Analytics.Utils.formatCurrency(value);case"integer":return Analytics.Utils.formatInteger(value);case"time":return Analytics.Utils.formatDuration(value);case"percent":return Analytics.Utils.formatPercent(value);case"date":if($dateString=value,8==$dateString.length)return $year=eval($dateString.substr(0,4)),$month=eval($dateString.substr(4,2))-1,$day=eval($dateString.substr(6,2)),$date=new Date($year,$month,$day),$date;if(6==$dateString.length)return $year=eval($dateString.substr(0,4)),$month=eval($dateString.substr(4,2))-1,$date=new Date($year,$month,"01"),$date;break;default:return value}},formatCurrency:function(t){return this.getD3Locale().format(Analytics.formats.currencyFormat)(t)},formatDuration:function(t){var e=parseInt(t,10),a=Math.floor(e/3600),n=Math.floor((e-3600*a)/60),r=e-3600*a-60*n;return a<10&&(a="0"+a),n<10&&(n="0"+n),r<10&&(r="0"+r),a+":"+n+":"+r},formatInteger:function(t){return this.getD3Locale().format(",")(t)},formatPercent:function(t){return this.getD3Locale().format(Analytics.formats.percentFormat)(t/100)},getD3Locale:function(){var t=window.d3FormatLocaleDefinition;return t.currency=Analytics.currency,d3.formatLocale(t)}};